# Kubernetes watch visualization

This collection demonstrate an interesting approach to experience how the
kubernetes watch works:

- Start to watch pods

```bash
$kubectl get --raw /api/v1/pods?watch
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kedu-56458b7898-t6s6b" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-xm8q4" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"etcd-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-controller-manager-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-proxy-wghqx" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-scheduler-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"storage-provisioner" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"vpnkit-controller" ... ...
```

- Scale down `deployment/coredns`

```bash
$kubectl -n kube-system scale --replicas=1 deployment/coredns
deployment.apps/coredns scaled
```

```bash
$kubectl get --raw /api/v1/pods?watch
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kedu-56458b7898-t6s6b" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-xm8q4" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"etcd-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-controller-manager-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-proxy-wghqx" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-scheduler-docker-desktop" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"storage-provisioner" ... ...
{"type":"ADDED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"vpnkit-controller" ... ...
{"type":"MODIFIED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"MODIFIED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"MODIFIED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"DELETED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"coredns-558bd4d5db-9szjh" ... ...
{"type":"MODIFIED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"vpnkit-controller" ... ...
{"type":"MODIFIED","object":{"kind":"Pod","apiVersion":"v1","metadata":{"name":"vpnkit-controller" ... ...
```

- You could try to scale up again to see what happened
